{# HEADER #}

<div
	class="relative flex items-center gap-x-2 pb-3">

	{# CALENDAR DATE NAVIGATION #}
	<a href="{{url.set('date', calendar.lastWeek)}}" class="text-sm inline-block text-center bg-gray-200 border border-gray-200 p-1 rounded w-8 h-8 hover:bg-blue-500 hover:text-white text-gray-400 hover:border-blue-500 hover:shadow transition">
		<i class="fas fa-chevron-left"></i>
	</a>

	<a href="{{url.set('date', calendar.nextWeek)}}" class="text-sm inline-block text-center bg-gray-200 border border-gray-200 p-1 rounded w-8 h-8 hover:bg-blue-500 hover:text-white text-gray-400 hover:border-blue-500 hover:shadow transition">
		<i class="fas fa-chevron-right"></i>
	</a>

	<div class="flex-1 text-center font-bold xs:text-xl">
		{{ mois(calendar.date, false) }}
	</div>

	<a href="{{url.set('date', null)}}" class="text-sm inline-block text-center bg-gray-200 border border-gray-200 p-1 px-2 rounded w-fit h-8 hover:bg-blue-500 hover:text-white text-gray-400 hover:border-blue-500 hover:shadow transition">
		Aujourd'hui
	</a>

	{# FILTERS #}
	<div id="calendar-filter" class="hidden absolute w-[250px] z-10 top-12 right-2 bg-white rounded border border-gray-200 w-fit px-4 py-2 border-b border-gray-200 flex flex-col gap-1">
		<div class="flex gap-2 items-center">
			<input type="checkbox" data-filter="event" name="" id="calendar-show-convoc" class="" checked>
			<h3 class="text-sm font-medium text-slate-600">Informations cave</h3>
		</div>

		<div class="flex gap-2 items-center">
			<input type="checkbox" name="" id="calendar-filter-convoc" data-filter="convoc" class="" checked>
			<h3 class="text-sm font-medium text-slate-600">Convocations</h3>
		</div>

		<div class="flex flex-col gap-1 ml-3">
			<div class="flex gap-2 items-center">
				<input type="checkbox" data-filter="convoc-pending" name="" id="calendar-filter-convoc-pending" class="" checked>
				<label for="" class="text-sm">En attente de réponse</label>
			</div>

			<div class="flex gap-2 items-center">
				<input type="checkbox" data-filter="convoc-accepted" name="" id="calendar-filter-convoc-accepted" class="" checked>
				<label for="" class="text-sm">Validées</label>
			</div>

			<div class="flex gap-2 items-center">
				<input type="checkbox" data-filter="convoc-changed" name="" id="calendar-filter-convoc-changed" class="" checked>
				<label for="" class="text-sm">Modification en attente</label>
			</div>

			<div class="flex gap-2 items-center">
				<input type="checkbox" data-filter="convoc-rejected" name="" id="calendar-filter-convoc-refused" class="" checked>
				<label for="" class="text-sm">Refusées</label>
			</div>

			<div class="flex gap-2 items-center">
				<input type="checkbox" data-filter="convoc-delivered" name="" id="calendar-filter-convoc-delivered" class="" checked>
				<label for="" class="text-sm">Livrées</label>
			</div>
		</div>
	</div>
</div>

{# CALENDAR #}
<div class="xs:grid xs:grid-cols-2 md:grid-cols-4 lg:grid-cols-7">
	{% for day in calendar.calendar %}
		<div class="agcal-day relative min-h-24 {{ ( day.nextMonth or day.lastMonth ) ? 'opacity-80 bg-slate-100' : ''}} border {{day.isPresent ? 'bg-yellow-50' : ''}}">
			<div class="agcal-week-header p-1 text-sm text-center border-b">
				{{calendarWeekHeader(day.date)}}
			</div>
			<div class="events flex flex-col gap-y-2 p-3">
				{% for event in day.events %}
					<div class="event relative group rounded bg-blue-500 text-white p-1">
						<span class="text-white truncate flex-1">{{ event.metadata.cepage }}</span>
						{% if event.metadata.commentVisible %}
							<div class="text-white text-xs">
								{{event.metadata.comment}}
							</div>
						{% endif %}
					</div>
				{% endfor %}
			</div>
		</div>
	{% endfor %}
</div>
